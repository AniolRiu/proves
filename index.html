 <!DOCTYPE html>
 <html>
        <head>
                <title>My Canvas page</title>
                <script src="todataurl.js"></script>
                <script>
                        window.addEventListener("mousedown",function(evt){
                                var cv=document.getElementsByTagName("canvas")[0];
                                var cx=cv.getContext("2d");
                                cx.fillRect(evt.clientX-cv.offsetLeft-8,evt.clientY-cv.offsetTop-8,16,16);
                        },false);
                </script>
        </head>
        <body>
                <canvas width="320" height="200" style="border:2px solid black;background:white;"></canvas>
                <input type="button" value="Set as background" onclick="
                	var cv=document.getElementsByTagName('canvas')[0];
                    document.documentElement.style.background='url('+cv.toDataURL()+')';" />
        </body>
 </html>
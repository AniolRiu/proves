<html>
  <head>
    <title>Socket chat</title>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.3.3.js"></script>
    <script type="text/javascript" charset="utf-8">
		// Wait for device API libraries to load
		document.addEventListener("deviceready", onDeviceReady, false);
		
		// device APIs are available
		function onDeviceReady() {
			var ip;
			var socket;
			$('#form_missatge').submit(function(){
				socket.emit('chat message', $('#m').val());
				$('#m').val('');
				return false;
			});
			$('#form_connexio').submit(function(){
				ip = $('#ip').val());
				socket = io('http://' + ip + ':3000');
				return false;
			});
			socket.on('chat message', function(msg){
				$('#messages').append($('<li>').text(msg));
			});
		}
	</script>
  </head>
  <body>
    <ul id="messages"></ul>
    <form action="form_missatge">
      <input id="m" autocomplete="off" /><button>Envia</button>  
    </form>
    
    <form action="form_connexio">
      <input id="ip" autocomplete="off" /><button>Envia</button>
    </form>
	
  </body>
</html>
